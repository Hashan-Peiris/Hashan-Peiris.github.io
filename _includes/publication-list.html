{% assign publications = include.publications | sort: 'year' | reverse %}
{% assign grouped = publications | group_by: 'year' %}

<div class="publication-years">
  {% for year in grouped %}
  <section class="publication-year" aria-label="Publications from {{ year.name }}">
    <h2 class="title is-4 has-text-white">{{ year.name }}</h2>
    <div class="publication-list">
      {% for pub in year.items %}
      <article class="publication-card" data-tags="{{ pub.tags | join: '|' }}">
        <div class="publication-header">
          <h3 class="title is-5">{{ pub.title }}</h3>
          <div class="publication-links">
            {% if pub.links.doi %}
            <a href="{{ pub.links.doi }}" class="button is-small is-light" target="_blank" rel="noopener">DOI</a>
            {% endif %}
            {% if pub.links.pdf %}
            <a href="{{ pub.links.pdf }}" class="button is-small is-info" target="_blank" rel="noopener">PDF</a>
            {% endif %}
            {% if pub.links.arxiv %}
            <a href="{{ pub.links.arxiv }}" class="button is-small is-dark" target="_blank" rel="noopener">arXiv</a>
            {% endif %}
          </div>
        </div>
        <p class="authors">{{ pub.authors | join: ', ' }}</p>
        <p class="venue">{{ pub.venue }}</p>
        {% if pub.tags %}
        <div class="tags are-medium">
          {% for tag in pub.tags %}
          <span class="tag">{{ tag }}</span>
          {% endfor %}
        </div>
        {% endif %}
        {% if pub.bibtex %}
        <details class="bibtex">
          <summary>Show BibTeX</summary>
          <pre>{{ pub.bibtex | escape }}</pre>
        </details>
        {% endif %}
      </article>
      {% endfor %}
    </div>
  </section>
  {% endfor %}
</div>
